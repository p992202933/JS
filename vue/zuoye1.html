<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
crossorigin="anonymous">
<style>
.red{
    background: red;
}
</style>
<body>
    <div id="app">
        <h1 class="text-center">todolist</h1>
        <form class="form-inline text-center" >
            <div class="form-group ">
              <label for="exampleInputName2">Name</label>
              <input type="text" class="form-control" v-model="proName" id="exampleInputName2" placeholder="请输入商品名">
            </div>
            <div class="form-group">
              <label for="exampleInputEmail2">Price</label>
              <input type="number" class="form-control" v-model="proPrice" id="exampleInputEmail2" placeholder="请输入价格">
            </div>
            <button type="submit" class="btn btn-default" v-on:click.prevent="add()">添加</button>
          </form>
          <form class="form-inline text-center">
                <div class="form-group">
                    <input type="text" class="form-control" v-model="searchName" placeholder="请输入过滤商品名">
                </div>
                <button type="submit" class="btn btn-default" @click.prevent="filProduct()">过滤</button>
            </form>
    
          <table class="table table-bordered">
                <thead class="text-center">
                        <td>选择</td>
                        <td>商品名</td>
                        <td>商品价格</td>
                        <td>删除</td>
                </thead>
                <tbody class='text-center'>
                      <tr v-for="(item, index) in proList" :key="item.id" v-on:click="choose(item)" :class="{red: item.isRed}">
                        <td>
                            <input type="checkbox" v-model="item.isRed">
                        </td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.price }}</td>
                        <td>
                                <button type="button" v-on:click.stop="del(index)" class="btn btn-warning glyphicon glyphicon-remove btn-xs" ></button>
                        </td>
                        
                      </tr>
                      <tr>
                          <td>
                                <button type="button" class="btn btn-danger btn-xs" v-on:click="delChecked()">删除选中</button>
                          </td>
                          <td colspan="3" >
                                总价是{{ total }}元
                          </td>
                      </tr>
                </tbody>

              </table>
    </div>
    <script src="vue.js"></script>
    <script>
   new Vue({
       el: '#app',
       data: {
        proList:[{
            name: '衣服',
            price: 122,
            isRed: false,
            id: 1
        },
        {
            name: '裤子',
            price: 132,
            isRed: false,
            id: 2
        },
        {
            name: '鞋子',
            price: 123,
            isRed: false,
            id: 3
        },
        {
            name: '电脑',
            price: 12222,
            isRed: false,
            id: 4
        },
        {
            name: '手机',
            price: 1222,
            isRed: false,
            id: 5
        }],
        proName: "",
        proPrice: '',
        showList: [{
            name: '衣服',
            price: 122,
            isRed: false,
            id: 1
        },
        {
            name: '裤子',
            price: 132,
            isRed: false,
            id: 2
        },
        {
            name: '鞋子',
            price: 123,
            isRed: false,
            id: 3
        },
        {
            name: '电脑',
            price: 12222,
            isRed: false,
            id: 4
        },
        {
            name: '手机',
            price: 1222,
            isRed: false,
            id: 5
        }

        ],
        searchName: ""
       },
       total : 0,
       methods: {
           choose(id){
            this.showList.forEach(function(obj,index){
                if(obj.id == id){
                    obj.isRed = !obj.isRed;
                }
            })
           },
           add(){
            this.proList.push({
                name : this.proName,
                price : Number.parseInt(this.proPrice),
                isRed: false,
                id:Symbol()
            })
            this.showList = [...this.proList]
           },
           del(id){
        let arr = this.proList.filter(function(obj,index){
            return obj.id != id;
        })
        this.proList = [...arr];
        this.showList = [...arr]
       },
       delChecked(){
            let showMe = this.proList.filter(function(obj,index){
                return obj.id != id
                
            })
            this.proList =[...showMe];
            this.showList = [...showMe];
       },
       filProduct(){
        let searchList = this.proList.filter(function(obj,index){
            return obj.name.includes(this.searchName);
        }
        
        )
        
                this.showList = [...this.searchList];
                searchName = ""
        }
       },
       computed: {
           total(){
               let sum = 0;
               this.proList.forEach(function(obj,index){
                   if(obj.isRed){
                    sum += obj.price;
                   }
               })
               return sum;
           }
       },
      
   })
    </script>
</body>
</html>